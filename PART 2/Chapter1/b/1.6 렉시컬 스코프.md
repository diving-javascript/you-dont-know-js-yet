# 1. 스코프

## 1.6 렉시컬 스코프 (Lexical Scope)

자바스크립트의 스코프가 컴파일 시에 결정된다는 것을 보여주었으며, 이러한 종류의 스코프를 "렉시컬 스코프(Lexical Scope)"라고 합니다. "렉시컬"은 앞서 언급한 컴파일의 "렉싱(Lexing)" 단계와 관련이 있습니다.

이 장의 결론으로 중요한 개념인 "렉시컬 스코프"의 핵심 아이디어는 함수, 블록, 변수 선언의 위치에 따라 전적으로 제어된다는 것입니다.

### **렉시컬 스코프의 주요 특징**

1. **함수와 변수 선언의 위치**:
    - 변수가 함수 내에 선언되면, 컴파일러는 이 선언을 함수의 스코프로 연결합니다.
    - 변수가 블록 스코프(`let`, `const`)로 선언되면, 해당 변수는 가장 가까운 `{ .. }` 블록과 연결됩니다. 이는 `var`와는 달리 함수 스코프가 아닌 블록 스코프를 갖습니다.

2. **변수 참조의 해결**:
    - 변수의 참조(할당 대상 또는 값의 출처)는 렉시컬하게 접근할 수 있는 스코프 중 하나에서 해결되어야 합니다. 그렇지 않으면 변수는 "선언되지 않음"으로 간주됩니다(이는 보통 오류를 초래합니다).
    - 현재 스코프에서 변수가 선언되지 않았으면, 다음 외부/포함 스코프로 이동하여 변수를 찾습니다. 이 과정은 일치하는 변수 선언을 찾거나 전역 스코프에 도달할 때까지 계속됩니다.

### **컴파일과 런타임의 차이**

컴파일 과정에서는 실제로 스코프와 변수에 대한 메모리를 예약하지 않습니다. 프로그램이 아직 실행되지 않았기 때문입니다.

대신 컴파일은 프로그램 실행에 필요한 모든 렉시컬 스코프의 지도를 만듭니다. 이를 런타임에 사용할 계획으로 생각할 수 있으며, 이 계획은 모든 스코프(즉, "렉시컬 환경")를 정의하고 각 스코프에 대한 모든 식별자(변수)를 등록합니다.

### **중요한 점**

- 스코프는 컴파일 시에 식별되지만, 실제로는 런타임에 필요할 때마다 생성됩니다.
- 각 스코프가 실행될 때마다 생성되는 방식입니다.

### **다음 장의 예고**

다음 장에서는 렉시컬 스코프의 개념적 기초를 자세히 설명하겠습니다. 이를 통해 렉시컬 스코프의 작동 방식을 더 잘 이해할 수 있을 것입니다.